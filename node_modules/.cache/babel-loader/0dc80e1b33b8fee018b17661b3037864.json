{"ast":null,"code":"var _jsxFileName = \"/Volumes/Data/hi7 /SAT-mock-test-/SAT-api/src/Components/getHighlight.js\";\nimport React, { Component } from \"react\";\nimport { Bar } from \"./popoverui\";\nimport Popover from \"react-text-selection-popover\";\nexport default class Highlight extends Component {\n  constructor(props) {\n    super(props);\n\n    this.restoreSelection = (containerEl, start, end) => {\n      var savedSel = {\n        start,\n        end\n      };\n      var charIndex = 0,\n          range = document.createRange();\n      range.setStart(containerEl, 0);\n      range.collapse(true);\n      var nodeStack = [containerEl],\n          node,\n          foundStart = false,\n          stop = false;\n\n      while (!stop && (node = nodeStack.pop())) {\n        if (node.nodeType == 3) {\n          var nextCharIndex = charIndex + node.length;\n\n          if (!foundStart && savedSel.start >= charIndex && savedSel.start <= nextCharIndex) {\n            range.setStart(node, savedSel.start - charIndex);\n            foundStart = true;\n          }\n\n          if (foundStart && savedSel.end >= charIndex && savedSel.end <= nextCharIndex) {\n            range.setEnd(node, savedSel.end - charIndex);\n            stop = true;\n          }\n\n          charIndex = nextCharIndex;\n        } else {\n          var i = node.childNodes.length;\n\n          while (i--) {\n            nodeStack.push(node.childNodes[i]);\n          }\n        }\n      }\n\n      document.designMode = \"on\";\n      var sel = window.getSelection();\n      sel.removeAllRanges();\n      sel.addRange(range);\n      document.execCommand(\"underline\", false, null);\n      document.designMode = \"off\";\n    };\n\n    this.saveSelection = () => {\n      var range, sel;\n\n      if (window.getSelection) {\n        // Non-IE case\n        sel = window.getSelection();\n\n        if (sel.getRangeAt) {\n          range = sel.getRangeAt(0);\n        }\n\n        console.log(range.startOffset, range.endOffset);\n        var savedObject = JSON.parse(localStorage.getItem(\"savedObject\"));\n\n        if (!savedObject) {\n          savedObject = [];\n        }\n\n        savedObject.push(range.startOffset + \"-\" + range.endOffset);\n        localStorage.setItem(\"savedObject\", JSON.stringify(savedObject));\n        document.designMode = \"on\";\n\n        if (range) {\n          sel.removeAllRanges();\n          sel.addRange(range);\n        }\n\n        document.execCommand(\"underline\", false, null);\n        document.designMode = \"off\";\n      } else if (document.selection && document.selection.createRange && document.selection.type != \"None\") {\n        // IE case\n        range = document.selection.createRange();\n        range.execCommand(\"underline\", false, null);\n      }\n    };\n\n    this.saveHighlight = () => {\n      const highlighted = [];\n    };\n\n    this.refParagraph = React.createRef();\n    this.saveSelection = this.saveSelection.bind(this);\n    this.saveHighlight = this.saveSelection.bind(this);\n  }\n\n  componentDidMount() {\n    var ele = document.getElementById('highlight');\n    var savedObject = JSON.parse(localStorage.getItem('savedObject'));\n\n    if (savedObject && savedObject.length > 0) {\n      savedObject.forEach(val => {\n        var pos = val.split('-');\n        console.log(val);\n        this.restoreSelection(ele, pos[0], pos[1]);\n      });\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      id: \"highlight\",\n      className: \"highlight\",\n      ref: this.refParagraph,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, \"Mr Holohan, assistant secretary of the Eire Abu Society, had been walking up and down Dublin for nearly a month, with his hands and pockets full of dirty pieces of paper, arranging about the series of concerts. He had a game leg and for this his friends called him Hoppy Holohan. He walked up and down constantly, stood by the hour at street corners arguing the point and made notes; but in the end it was Mrs Kearney who arranged everything Miss Devlin had become Mrs Kearney out of spite. She had been educated in a high-class convent, where she had learned French and music. As she was naturally pale and unbending in manner she made few friends at school. When she came to the age of marriage she was sent out to many houses where her playing and ivory manners were much admired. She sat amid the chilly circle of her accomplishments, waiting for some suitor to brave it and o\\x1Fer her a brilliant life. But the young men whom she met were Kathleen, to a good convent, where she learned French and music, and a\\x1Eerward paid her fees at the Academy. Every year in the month of July Mrs Kearney found occasion to say to some friend:\"), React.createElement(Popover, {\n      selectionRef: this.refParagraph,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(Bar, {\n      bg: \"yellow\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      onClick: this.saveSelection,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Highlight\")))));\n  }\n\n}","map":{"version":3,"sources":["/Volumes/Data/hi7 /SAT-mock-test-/SAT-api/src/Components/getHighlight.js"],"names":["React","Component","Bar","Popover","Highlight","constructor","props","restoreSelection","containerEl","start","end","savedSel","charIndex","range","document","createRange","setStart","collapse","nodeStack","node","foundStart","stop","pop","nodeType","nextCharIndex","length","setEnd","i","childNodes","push","designMode","sel","window","getSelection","removeAllRanges","addRange","execCommand","saveSelection","getRangeAt","console","log","startOffset","endOffset","savedObject","JSON","parse","localStorage","getItem","setItem","stringify","selection","type","saveHighlight","highlighted","refParagraph","createRef","bind","componentDidMount","ele","getElementById","forEach","val","pos","split","render"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Bar } from \"./popoverui\";\nimport Popover from \"react-text-selection-popover\";\n\nexport default class Highlight extends Component {\n    constructor(props) {\n        super(props);\n        this.refParagraph = React.createRef();\n        this.saveSelection = this.saveSelection.bind(this);\n        this.saveHighlight = this.saveSelection.bind(this);\n      }\n\n      componentDidMount() {\n         var ele = document.getElementById('highlight');\n         var savedObject = JSON.parse(localStorage.getItem('savedObject'))\n         if(savedObject && savedObject.length>0) {\n            savedObject.forEach((val)=>{\n              var pos = val.split('-')\n              console.log(val)\n\n              this.restoreSelection(ele, pos[0], pos[1])\n            })\n         }\n      }\n   \n      restoreSelection = (containerEl, start, end) => {\n        var savedSel = {start, end}\n        var charIndex = 0, range = document.createRange();\n        range.setStart(containerEl, 0);\n        range.collapse(true);\n        var nodeStack = [containerEl], node, foundStart = false, stop = false;\n        while (!stop && (node = nodeStack.pop())) {\n            if (node.nodeType == 3) {\n                var nextCharIndex = charIndex + node.length;\n                if (!foundStart && savedSel.start >= charIndex && savedSel.start <= nextCharIndex) {\n                    range.setStart(node, savedSel.start - charIndex);\n                    foundStart = true;\n                }\n                if (foundStart && savedSel.end >= charIndex && savedSel.end <= nextCharIndex) {\n                    range.setEnd(node, savedSel.end - charIndex);\n                    stop = true;\n                }\n                charIndex = nextCharIndex;\n            } else {\n                var i = node.childNodes.length;\n                while (i--) {\n                    nodeStack.push(node.childNodes[i]);\n                }\n            }\n        }\n        document.designMode = \"on\";\n\n        var sel = window.getSelection();\n        sel.removeAllRanges();\n        sel.addRange(range);\n        document.execCommand(\"underline\", false, null);\n        document.designMode = \"off\";\n    }\n\n      saveSelection = () => {\n        var range, sel;\n        if (window.getSelection) {\n            // Non-IE case\n            sel = window.getSelection();\n            if (sel.getRangeAt) {\n                range = sel.getRangeAt(0);\n            }\n            console.log(range.startOffset, range.endOffset)\n            var savedObject = JSON.parse(localStorage.getItem(\"savedObject\"));\n            if(!savedObject) {\n              savedObject = [];\n            }\n            savedObject.push(range.startOffset+\"-\"+range.endOffset)\n            localStorage.setItem(\"savedObject\", JSON.stringify(savedObject))\n             \n            document.designMode = \"on\";\n            \n            if (range) {\n                sel.removeAllRanges();\n                sel.addRange(range);\n            }\n            document.execCommand(\"underline\", false, null);\n            document.designMode = \"off\";\n        } else if (document.selection && document.selection.createRange &&\n                document.selection.type != \"None\") {\n            // IE case\n            range = document.selection.createRange();\n            range.execCommand(\"underline\", false, null);\n\n        }\n      }\n\n      saveHighlight = () => {\n        const highlighted = [];\n        \n      }\n      render() {\n        return (\n        <div>\n\n        <p id='highlight' className=\"highlight\" ref={this.refParagraph} >\n                    Mr Holohan, assistant secretary of the Eire\n            Abu Society, had been walking up and down\n            Dublin for nearly a month, with his hands and\n            pockets full of dirty pieces of paper, arranging\n            about the series of concerts. He had a game\n            leg and for this his friends called him Hoppy\n            Holohan. He walked up and down constantly,\n            stood by the hour at street corners arguing\n            the point and made notes; but in the end it\n            was Mrs Kearney who arranged everything\n\n                Miss Devlin had become Mrs Kearney out\n        of spite. She had been educated in a\n        high-class convent, where she had learned\n        French and music. As she was naturally pale\n        and unbending in manner she made few\n        friends at school. When she came to the age\n        of marriage she was sent out to many houses\n        where her playing and ivory manners were\n        much admired. She sat amid the chilly circle\n        of her accomplishments, waiting for some\n        suitor to brave it and o\u001fer her a brilliant life.\n        But the young men whom she met were Kathleen, to a good convent, where she\n        learned French and music, and a\u001eerward paid\n        her fees at the Academy. Every year in the\n        month of July Mrs Kearney found occasion to\n        say to some friend:\n        </p>\n        <Popover selectionRef={this.refParagraph} >\n        <Bar bg=\"yellow\">\n          <div onClick ={ this.saveSelection} >\n          <p>\n          Highlight\n          </p>\n          </div>\n        </Bar>\n        </Popover>\n\n        </div>\n        )\n      }\n    \n}\n"]},"metadata":{},"sourceType":"module"}